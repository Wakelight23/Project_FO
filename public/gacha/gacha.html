<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>가챠 시스템</title>
    <style>
      /* 카드 비율 고정 넣어야함 */
      body {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
        background-color: #111; /* 어두운 배경 */
        font-family: Arial, sans-serif;
        overflow: hidden;
      }

      video {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%; /* 전체 화면에 맞추기 */
        height: 100%; /* 전체 화면에 맞추기 */
        object-fit: cover; /* 비율 유지하며 잘림 */
        z-index: 1; /* 비디오 배경 */
      }

      .card {
        /*해당 테두리 컬러는 등급에 따라 변경해 보자*/
        position: absolute;
        width: 15%; /* 카드 너비 */
        height: 55%; /* 카드 높이 */
        transform-style: preserve-3d; /* 3D 회전 유지 */
        transition: transform 0.1s, box-shadow 0.1s; /* 회전 및 그림자 애니메이션 */
        z-index: 2; /* 카드가 비디오 위에 표시 */
        left: 50%; /* 중앙 정렬 */
        top: 50%; /* 중앙 정렬 */
        transform: translate(-50%, -50%); /* 중앙 정렬 */
        border: 4px solid #fff; /* 테두리 설정 */
        border-radius: 10px; /* 모서리 둥글게 */
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5); /* 그림자 효과 */
        background-color: rgba(255, 255, 255, 0.8); /* 배경색 설정 */
      }

      .card img {
        width: 100%; /* 카드 이미지 크기 */
        height: 100%; /* 카드 이미지 크기 */
        border-radius: 10px; /* 카드 모서리 둥글게 */
      }
      #confrim {
        position: fixed; /* 고정 위치 */
        bottom: 20%; /* 하단에서 20px */
        right: 20%; /* 우측에서 20px */
        padding: 10px 20px; /* 버튼 패딩 */
        background-color: #4caf50; /* 버튼 배경색 */
        color: white; /* 글자 색상 */
        border: none; /* 테두리 없애기 */
        border-radius: 5px; /* 둥근 모서리 */
        font-size: 16px; /* 글자 크기 */
        cursor: pointer; /* 마우스 커서 변경 */
        z-index: 3; /* 버튼이 카드 위에 표시 */
        border: 2px solid #fff; /* 테두리 설정 */
      }

      #confrim:hover {
        background-color: #46d34b; /* 버튼 호버 효과 */
      }
    </style>
  </head>
  <body>
    <video id="gachaVideo" src="gacha.mp4" preload="auto" loop muted></video>
    <!-- 비디오 URL을 여기에 입력 -->
    <div class="card" id="card">
      <!-- id cardImage 의 src 값을 변경하면 된다.-->
      <img
        id="cardImage"
        src="https://i.namu.wiki/i/xMML4hmUnMn2gmNrK2Y4vuqwL9USPsUp4Q_ccjhcZGUjA8u6yZ8kusDqqydbSbEE21sIAmtIX4oujCGTf47Yb7uvYoG7E5E63JVeYxXL9hipKzQnugLDHogs5-t43Us5v2i_KiCqLhiI_EAE1aXrvw.webp"
        alt="Card"
      />
    </div>
    <button id="confrim">확인</button>

    <script>
      const video = document.getElementById('gachaVideo');
      const card = document.getElementById('card');
      const cardImage = document.getElementById('cardImage');

      const width = window.innerWidth;
      const height = window.innerHeight;
      const aspectRatio = width / height;

      console.log('현재 화면 비율: ' + aspectRatio);

      let rotationX = 0;
      let rotationY = 0;

      // 비디오 자동 재생
      video.play();
      video.playbackRate = 1.5; // 비디오 재생 속도 2배속

      document.body.addEventListener('mousemove', (event) => {
        const rect = card.getBoundingClientRect();
        const mouseX = event.clientX - width / 2;
        const mouseY = event.clientY - height / 2;

        // 마우스 위치에 따라 카드의 회전 각도 계산 (최대 각도 제한)
        rotationY = Math.max(-75, Math.min(75, (mouseX / width) * 75)); // -20도에서 20도까지 회전 제한
        rotationX = Math.max(-75, Math.min(75, (mouseY / height) * 75)); // -20도에서 20도까지 회전 제한

        // 카드 회전 적용
        card.style.transform = `translate(-50%, -50%) rotateY(${rotationY}deg) rotateX(${rotationX}deg)`;
      });

      // 비디오가 로드되면 자동 재생
      video.onloadeddata = () => {
        video.play();
      };

      //현재 매우 흡족 하지만 피곤.....
    </script>
  </body>
</html>
